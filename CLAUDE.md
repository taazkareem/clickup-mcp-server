# Claude Development Instructions for ClickUp MCP Server

This project is a Model Context Protocol (MCP) server that enables AI applications to interact with ClickUp workspaces.

## Development Setup

This project has a unique development workflow where Claude Code serves dual purposes:

1. **Source Code Development**: Claude Code edits the TypeScript source code of the MCP server
2. **Direct Testing**: The dev MCP server is loaded as an extension in Claude Code, allowing direct testing of MCP tools

### Workflow

1. Make changes to the TypeScript source code in `src/`
2. Build the project: `npm run build`
3. Restart Claude Code to reload the updated MCP server
4. Test MCP tools directly by calling them (e.g., `get_workspace_hierarchy`, `create_task`, etc.)

### Key Commands

- `npm run build` - Compile TypeScript to JavaScript (outputs to `build/` directory)
- `npm run dev` - Run TypeScript compiler in watch mode
- `npm start` - Run the built server directly
- `npm test` - Run tests (if available)

## Project Structure

- `src/` - TypeScript source code
  - `index.ts` - Main entry point
  - `server.ts` - MCP server configuration and request handlers
  - `tools/` - Tool definitions and handlers
  - `services/` - ClickUp API service layer
- `build/` - Compiled JavaScript (generated by TypeScript compiler)
- `dist/` - Not used in this project (build output is in `build/`)

## Testing MCP Tools

When testing MCP tools directly in Claude Code:

1. Use real ClickUp data from your workspace:
   - Valid task IDs (e.g., "86cvjvxup")
   - Actual task names from your workspace
   - Real list and folder names

2. Common test scenarios:
   - Get workspace hierarchy: `get_workspace_hierarchy`
   - Find tasks: `get_tasks` with list name
   - Create tasks: `create_task` with required fields
   - Update tasks: `update_task` with task ID or name
   - Get subtasks: `get_subtasks` with parent task ID

3. Error handling tests:
   - Test with non-existent IDs
   - Test with missing required parameters
   - Test with invalid data formats

## Important Notes

- **Build Output**: The compiled JavaScript is in the `build/` directory, NOT `dist/`
- **Restart Required**: After building, you must restart Claude Code to load the updated MCP server
- **Environment Variables**: The server uses `CLICKUP_API_KEY` and `CLICKUP_TEAM_ID` from Claude Code's MCP configuration
- **Logging**: Check Claude Code's logs for MCP server output and debugging information

## Current Development Focus

- Implementing and testing the `get_subtasks` handler
- Ensuring proper error handling and validation
- Supporting both task ID and task name lookups
- Maintaining consistency with other tool handlers

## Debugging Tips

1. Check the Claude Code logs for MCP server errors
2. Use `console.log` in the TypeScript code for debugging (will appear in logs)
3. Test incrementally - verify each change works before moving on
4. Use the TODO system to track testing progress